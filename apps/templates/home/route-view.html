{% extends "layouts/base.html" %}

{% block title %} 탐방 경로 게시판 {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
    <style>
        .card {
            width:100%;
            aspect-ratio:1/2;
        }
        #card-image {
            width:100%;
            aspect-ratio:1/1;
        }
    </style>
{% endblock stylesheets %}

{% block content %}

    <main>

        {% include 'includes/preloader.html' %}

        <!-- Header -->
        <section class="section section-header pb-11 bg-primary text-white">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-12 col-xl-8 text-center">
                        <h1 class="display-2 mb-3">문화재 검색</h1>
                        <p class="lead">시대별로 문화재를 검색할 수 있습니다.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section section-lg">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <h1>{{ post.writer.username }}</h1>
                    </div>
                </div>
                <div class="row align-items-center">
                    <div class="col-9">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>국문명</th>
                                    <th>지역</th>
                                    <th>시대</th>
                                    <th>위도</th>
                                    <th>경도</th>
                                    <th>분류</th>
                                    <th>코멘트</th>
                                </tr>
                            </thead>
                            <tbody id="tableContents"></tbody>
                        </table>
                    </div>
                    <div class="col-3">
                        <div class="card shadow">
                            <img class="card-image-top rounded-top" id="card-image" src="{{ ASSETS_ROOT }}/img/transparent.png">
                            <div class="card-body">
                            <h6 class="card-title" id="card-title"></h6>
                                <p class="card-text" id="card-content" style="color:dimgray"></p>
                                <p class="card-text" id="card-comment"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


    </main>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            var post_detail = {{ post_detail|safe }};
            $.each(post_detail, function(index, item) {
                var tableContent = `<tr id="row${item.order}">`
                                        + `<td>${item.ccbaMnm1}</td>`
                                        + `<td>${item.ccbaCtcdNm}</td>`
                                        + `<td>${item.ccbaPcd1Nm}</td>`
                                        + `<td>${item.longitude}</td>`
                                        + `<td>${item.latitude}</td>`
                                        + `<td>${item.ccmaName} ${item.crltsnoNm}호</td>`
                                        + `<td>${item.comment}</td>`
                                    + `</tr>`;
                $(tableContent).appendTo("#tableContents").on("click", function() {
                    $("#card-image").attr("src", item.imageUrl);
                    $("#card-title").text(item.ccbaMnm1);
                    $("#card-content").html(item.ccbaCtcdNm + "|" + item.ccbaPcd1Nm + "<br>" + item.ccmaName + item.crltsnoNm + "호");
                    $("#card-comment").text(item.comment);
                });
            });
        });
    </script>
{% endblock javascripts %}
